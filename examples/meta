
@macro call {
  push #{afterCall}
  jmp #{_0}
  @debug #{_0}
afterCall:
  pop // pop address from stack
}

@macro function {
  jmp end

funcbody:
  #{body}
  jmp $l[-1]

end: // how to get this to transpile to @set say_hi ... without reaching into what say_hi is?

  @set #{#{_0}} #{funcbody}
}

@function funk {
  //@puts "hello there"
}

@call say_hi

//@say_hi
endprog:
