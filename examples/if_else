@macro myyield {
  @macro #{_0} {
    @set #{_0} #{body}
  }
  @get #{_0}
}

@macro if {
  cmp #{_0} 0
  je _else

  #{body}
  jmp _end

_else:
  #{else_body}

_end:
  @macro else {
    @debug vars
    @set else_body #{body}
  }
}

@if 1 {
  jmp endprogram

  @else {
    jmp infiniteloop
  }
}

infiniteloop:
  jmp infiniteloop
endprogram:

