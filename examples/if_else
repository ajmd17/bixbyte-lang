@macro if {
  cmp #{_0} 0
  je #{_else}

  #{body}

_else:
  #{else_body}
_end:
  @macro else {
    @set else_body #{body}
  }
}

@if 0 {
  jmp #{endprogram}

  @else {
    jmp #{infiniteloop}
  }
}

infiniteloop:
  jmp #{infiniteloop}
endprogram:

