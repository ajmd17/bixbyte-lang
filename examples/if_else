@macro myyield {
  @macro #{_0} {
    @set #{_0} #{body}
  }

  @get #{_0}
}

@macro if {
  @set _0 1
  @debug #{_0}
  cmp #{_0} 0
  je #{_else}

  #{body}
  jmp #{_end}

_else:
  #{else_body}

_end:
  @macro else {
    @set else_body #{body}
  }
}

@if 1 {
  jmp #{endprogram}

  @else {
    jmp #{infiniteloop}
  }
}

infiniteloop:
  jmp #{infiniteloop}
endprogram:

